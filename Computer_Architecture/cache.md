## 캐시메모리

### 정의
> 주 기억장치인 RAM과 CPU 사이에 위치하여 프로세서가 매번 메인 메모리에 접근할 필요 없이 자주 사용하는 데이터에 빠르게 접근할 수 있도록 함. 속도 향상에 기여를 많이 할 수 있지만, 비용이 비쌈.

### 지역성
- 캐시 메모리의 적중률(Hit ratio)을 올리기 위해 지역성 원리를 사용함.
- 시간적 지역성은 최근에 참조된 데이터가 또 참조될 가능성이 높다는 것을 의미하며, for 문에서 변수 i가 여기에 해당함.
- 공간적 지역성은 한 번 참조된 데이터 근처의 데이터가 참조될 가능성이 높다는 것을 의미하며, 배열이 여기에 해당함.

### 작동 방식

<img src="../assets/cache_process.png" width=600>

- MPU에서 데이터를 필요로 한다
- 캐시로 필요한 데이터의 주소를 보낸다
- 캐시에 필요한 데이터가 있을 경우 MPU로 데이터를 보내주며, 이 경우를 **Cache Hit**이라 한다.
- 필요한 데이터가 없을 경우 **Cache Miss**라고 하며, 메모리버스를 통해 실제 메모리에서 필요한 데이터를 가져온다.
- MPU로 데이터가 전달되는 과정에서 Cache에 새로운 데이터를 **Update** 해준다

### 캐시 미스
- Cold miss: 해당 데이터를 처음 불러와 메모리에 없는 경우
- Conflict miss: 여러개의 명령어 주소가 동일한 캐시메모리 주소에 저장되어있는 경우
- Capacity miss: 캐시 메모리 공간이 부족한 경우

### 캐시 매핑
> 캐시 매핑이란 캐시에 데이터 주소를 저장하는 방식을 의미함. 크게 직접 / 연관 / 집합 연관으로 나뉨.
- 직접 사상(direct mapping) 
    - 메인 메모리를 일정한 크기로 나누고 각 영역을 캐시 메모리에 저장하는 방식
    - 여러 개의 메모리 영역이 1개의 캐시 메모리에 매핑됨. => Conflict miss 발생 가능

- 연관 사상(associate mapping)
    - 비어있는 캐시 메모리가 존재할 때 저장하는 방식.
    - 적중률이 높다는 장점이 있으며 저장할 때는 간단함.
    - 데이터를 검색할 때 규칙이 없어서 오래걸림.

- 집합 연관 사상 (set associate)
    - direct + asoociate mapping
    - 캐시 메모리는 세트로 구분되고 세트 내에 2개 이상의 슬롯을 가짐


### 캐시 매핑 작동 방식
- https://kimtaehyun98.tistory.com/48